"use strict";(self.webpackChunkdat_ve_xe=self.webpackChunkdat_ve_xe||[]).push([[5331],{8642:function(e,t,o){o.r(t),o.d(t,{default:function(){return Z}});var n=o(4165),s=o(5861),a=o(9439),r=o(2791),c=o(7022),l=o(9743),i=o(2677),u=o(9140),h=o(3063),d=o(3360),m=o(7689),x=o(1087),j=o(1469),b=o(8429),p=o(3728),g=o.p+"static/media/background-login2.90230e962ba201487a9a.jpg",f=o(9230),k=o(9085),v=o(2062),w=o.n(v),N=o(5872),y=o(184);var Z=function(){var e=(0,r.useContext)(j.I).setToken,t=(0,r.useState)("USER"),o=(0,a.Z)(t,2),v=(o[0],o[1],(0,r.useState)("")),Z=(0,a.Z)(v,2),S=Z[0],T=Z[1],C=(0,r.useState)(""),I=(0,a.Z)(C,2),E=I[0],U=I[1],L=(0,f.$G)().t,O=(0,m.s0)(),G=function(){var t=(0,s.Z)((0,n.Z)().mark((function t(o){var s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.preventDefault(),s={username:S,password:E},(0,b.httpLogin)(s).then((function(e){return e.json()})).then((function(t){if(console.log(t),null!=t.object&&200==t.status){var o={jwtToken:t.object.jwtToken,account:{id:t.object.id,username:t.object.username,role:t.object.role,email:t.object.email}};e(o),"USER"===t.object.role?O("/home"):"ADMIN"===t.object.role?O("/admin/home"):"NHAXE"===t.object.role&&O("/nha-xe/home")}else 401==t.status?w()({title:L("Username ho\u1eb7c password kh\xf4ng ch\xednh x\xe1c!!!"),text:"",icon:"warning",button:"Ok"}):400==t.status?w()({title:L("T\xe0i kho\u1ea3n ch\u01b0a \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t"),text:"",icon:"warning",button:"Ok"}):201==t.status?(localStorage.setItem("username",S),localStorage.setItem("password",E),O("/verify-email"),w()({title:L("Vui l\xf2ng ki\u1ec3m tra email \u0111\u1ec3 l\u1ea5y m\xe3 otp"),text:"",icon:"info",button:"Ok"})):204==t.status?(localStorage.setItem("accountTemp",JSON.stringify({id:t.object.id,username:t.object.username,role:t.object.role,email:t.object.email})),localStorage.setItem("tokenTemp",t.object.jwtToken),O("/gia-han-dich-vu")):w()({title:L("\u0110\xe3 x\u1ea3y ra l\u1ed7i, vui l\xf2ng th\u1ef1c hi\u1ec7n l\u1ea1i"),text:"",icon:"error",button:"Ok"})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=(0,r.useState)([]),_=(0,a.Z)(R,2),A=_[0],B=_[1],D=(0,r.useState)([]),F=(0,a.Z)(D,2),H=F[0],M=F[1],q=(0,N.Nq)({onSuccess:function(e){B(e),console.log(e)},onError:function(e){return console.log("Login Failed:",e)}});return(0,r.useEffect)((function(){A&&fetch("http://localhost:8081/api/login-google?accessToken=".concat(A.access_token),{}).then((function(e){return e.json()})).then((function(t){if(200==t.status){if(console.log(1),null!=t.object){var o={jwtToken:t.object.jwtToken,account:{id:t.object.id,username:t.object.username,role:t.object.role,email:t.object.email}};e(o),"USER"===t.object.role?O("/home"):"ADMIN"===t.object.role?O("/admin/home"):"NHAXE"===t.object.role&&O("/nha-xe/home"),M(t)}}else if(201==t.status){console.log(2);var n={jwtToken:t.object.jwtToken,account:{id:t.object.id,username:t.object.username,role:t.object.role,email:t.object.email}};O("/cap-nhat-login-google"),e(n)}else 400==t.status?"Email has existed."==t.message&&w()({title:L("Email \u0111\xe3 t\u1ed3n t\u1ea1i"),text:"",icon:"info",button:"Ok"}):M(null);console.log(t)})).catch((function(e){return console.log(e)}))}),[A]),console.log(A),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(k.Ix,{}),(0,y.jsx)("img",{src:g,style:{width:"100vw",height:"100vh",objectFit:"cover",filter:"brightness(60%)"}}),(0,y.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px",width:"100vw",height:"100vh"},children:(0,y.jsx)(c.Z,{children:(0,y.jsx)(l.Z,{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:(0,y.jsxs)(i.Z,{md:8,lg:6,xs:12,children:[(0,y.jsx)("div",{style:{border:"solid 10px blue",background:"blue",borderRadius:"8px 8px 0px 0px"}}),(0,y.jsx)(u.Z,{className:"shadow",style:{borderRadius:"0px 0px 8px 8px"},children:(0,y.jsx)(u.Z.Body,{children:(0,y.jsxs)("div",{className:"mb-3 mt-md-4",children:[(0,y.jsx)("h2",{className:"fw-bold mb-2 text-uppercase ",children:"WebTour"}),(0,y.jsx)("p",{className:" mb-5",children:L("Vui l\xf2ng nh\u1eadp username v\xe0 password c\u1ee7a b\u1ea1n")}),(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsxs)(h.Z,{onSubmit:G,children:[(0,y.jsxs)(h.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,y.jsx)(h.Z.Label,{className:"text-center",children:"Username"}),(0,y.jsx)(h.Z.Control,{onChange:function(e){return T(e.target.value)},type:"text",placeholder:L("Nh\u1eadp username")})]}),(0,y.jsxs)(h.Z.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,y.jsx)(h.Z.Label,{children:"Password"}),(0,y.jsx)(h.Z.Control,{onChange:function(e){return U(e.target.value)},type:"password",placeholder:L("Nh\u1eadp password")})]}),(0,y.jsx)(h.Z.Group,{style:{marginTop:"20px"},className:"mb-3",controlId:"formBasicCheckbox",children:(0,y.jsx)("p",{className:"small",children:(0,y.jsx)("a",{className:"text-primary",href:"#/request-forget-password",children:L("Qu\xean m\u1eadt kh\u1ea9u?")})})}),(0,y.jsx)("div",{className:"d-grid",children:(0,y.jsx)(d.Z,{variant:"primary",type:"submit",children:L("\u0110\u0103ng nh\u1eadp")})})]}),(0,y.jsxs)("div",{className:"mt-3",children:[(0,y.jsxs)("p",{className:"mb-0  text-center",children:[L("Kh\xf4ng c\xf3 t\xe0i kho\u1ea3n?")," ",(0,y.jsx)("a",{className:"text-primary fw-bold",children:(0,y.jsx)(x.rU,{to:"/sign-up",children:L("\u0110\u0103ng k\xfd")})})]}),(0,y.jsx)("p",{className:"mb-2  text-center",children:L("Ho\u1eb7c")}),(0,y.jsx)("p",{className:"mb-0  text-center",children:H?(0,y.jsx)("button",{style:{padding:"8px",backgroundColor:"white",color:"black"},onClick:function(){(0,N.Kz)(),M(null)},children:"Log out"}):(0,y.jsxs)(d.Z,{onClick:q,style:{backgroundColor:"white",borderColor:"red"},children:[(0,y.jsx)(p.JM8,{size:35}),(0,y.jsx)("span",{style:{color:"black",marginLeft:"10px"},children:L("\u0110\u0103ng nh\u1eadp b\u1eb1ng Google")})]})})]}),(0,y.jsx)("div",{className:"mt-3",children:(0,y.jsx)("p",{className:"mb-0  text-center",children:(0,y.jsx)("a",{lassName:"text-primary fw-bold",children:(0,y.jsx)(x.rU,{to:"/",children:L("\u0110\u1ebfn trang ch\u1ee7")})})})})]})]})})})]})})})})]})}}}]);
//# sourceMappingURL=5331.66987b6f.chunk.js.map
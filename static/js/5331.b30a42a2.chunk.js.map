{"version":3,"file":"static/js/5331.b30a42a2.chunk.js","mappings":"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","sources":["components/web/Login.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { Button, Card, Col, Container, Form, Row } from \"react-bootstrap\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { MyContext } from \"../../App\";\r\nimport { httpLogin } from \"../hooks/Request\";\r\nimport { FcGoogle } from \"react-icons/fc\";\r\nimport backgroundLogin from \"../../assets/img/background-login2.jpg\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ToastContainer } from \"react-toastify\";\r\n\r\nfunction Login() {\r\n\r\n  const setToken = useContext(MyContext).setToken;\r\n  const [role, setRole] = useState(\"USER\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const {t} = useTranslation();\r\n\r\n  const nav = useNavigate();\r\n\r\n  const loginGoogle =()=>{\r\n    window.location.replace(\"https://accounts.google.com/o/oauth2/auth?scope=profile&redirect_uri=http://localhost:8081/api/login-google&response_type=code&client_id=632584279277-6ov8je5ek4p0p67ad1892832k4naihk3.apps.googleusercontent.com&approval_prompt=force\");\r\n  }\r\n\r\n  const login = async(e)=>{\r\n    e.preventDefault();\r\n    let accountLogin ={\r\n      username,password\r\n    }\r\n\r\n    httpLogin(accountLogin).then(res=>res.json()).then(data=>{\r\n      console.log(data);\r\n      if(data.object!=null){\r\n        const userToken = {\r\n          jwtToken: data.object.jwtToken,\r\n          account: {\r\n            id: data.object.id,\r\n            username: data.object.username,\r\n            role: data.object.role,\r\n            email: data.object.email\r\n          }\r\n        }\r\n        setToken(userToken);//lưu token\r\n        window.alert(t(\"Đăng nhập thành công!!!\"))\r\n        if(data.object.role===\"USER\"){\r\n          nav(\"/home\")\r\n        }else if(data.object.role===\"ADMIN\"){\r\n          nav(\"/admin/home\")\r\n        }else if(data.object.role===\"NHAXE\"){\r\n          nav(\"/nha-xe/home\")\r\n        }\r\n      }\r\n      else if(data.status==401){\r\n        window.alert(t(\"Username hoặc password không chính xác!!!\"))\r\n      }\r\n      else{\r\n        window.alert(data.message)\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer/>\r\n      <img src={backgroundLogin} style={{width: '100vw', height: '100vh', objectFit: \"cover\", filter: \"brightness(60%)\"}}></img>\r\n      <div style={{position: \"absolute\", top: \"0px\", left: \"0px\", width: '100vw', height: '100vh'}}>\r\n      <Container>\r\n        <Row className=\"d-flex justify-content-center align-items-center\" style={{height: \"100vh\"}}>\r\n          <Col md={8} lg={6} xs={12}>\r\n          <div style={{border: \"solid 10px blue\", background:\"blue\", borderRadius: \"8px 8px 0px 0px\"}}></div>\r\n            <Card className=\"shadow\" style={{borderRadius: \"0px 0px 8px 8px\"}}>\r\n              <Card.Body>\r\n                <div className=\"mb-3 mt-md-4\">\r\n                  <h2 className=\"fw-bold mb-2 text-uppercase \">WebTour</h2>\r\n                  <p className=\" mb-5\">{t(\"Vui lòng nhập username và password của bạn\")}</p>\r\n                  <div className=\"mb-3\">\r\n                    <Form onSubmit={login}>\r\n                      <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                        <Form.Label className=\"text-center\">\r\n                          Username\r\n                        </Form.Label>\r\n                        <Form.Control onChange={(e)=>setUsername(e.target.value)} type=\"text\" placeholder={t(\"Nhập username\")}/>\r\n                      </Form.Group>\r\n\r\n                      <Form.Group\r\n                        className=\"mb-3\"\r\n                        controlId=\"formBasicPassword\"\r\n                      >\r\n                        <Form.Label>Password</Form.Label>\r\n                        <Form.Control onChange={(e)=>setPassword(e.target.value)} type=\"password\" placeholder={t(\"Nhập password\")} />\r\n                      </Form.Group>\r\n\r\n                      {/*<Form.Group\r\n                        className=\"mb-3\"\r\n                      >\r\n                        <Form.Label>Vai trò</Form.Label>\r\n                        <Form.Select style={{display:\"block\"}} onChange={(e)=>setRole(e.target.value)}>\r\n                              <option defaultChecked value={\"USER\"}>Người dùng</option>\r\n                              <option value={\"NHAXE\"}>Nhà xe</option>\r\n                              <option value={\"ADMIN\"}>Admin</option>\r\n                        </Form.Select>\r\n                      </Form.Group>*/}\r\n\r\n                    \r\n                      <Form.Group\r\n                        style={{marginTop: \"20px\"}}\r\n                        className=\"mb-3\"\r\n                        controlId=\"formBasicCheckbox\"\r\n                      >\r\n                        <p className=\"small\">\r\n                          <a className=\"text-primary\" href=\"#/request-forget-password\">\r\n                            Forgot password?\r\n                          </a>\r\n                        </p>\r\n                      </Form.Group>\r\n\r\n                      <div className=\"d-grid\">\r\n                        <Button variant=\"primary\" type=\"submit\">\r\n                          {t(\"Đăng nhập\")}\r\n                        </Button>\r\n                      </div>\r\n                    </Form>\r\n                    <div className=\"mt-3\">\r\n                      <p className=\"mb-0  text-center\">\r\n                        {t(\"Không có tài khoản?\")}{\" \"}\r\n                        <a className=\"text-primary fw-bold\">\r\n                          <Link to=\"/sign-up\">{t(\"Đăng ký\")}</Link>\r\n                        </a>\r\n                      </p>\r\n                      <p className=\"mb-2  text-center\">\r\n                        {t(\"Hoặc\")}\r\n                      </p>\r\n                      <p className=\"mb-0  text-center\">\r\n                        <Button onClick={loginGoogle} style={{backgroundColor: \"white\", borderColor: \"red\"}}><FcGoogle size={35}></FcGoogle><span style={{color:\"black\", marginLeft: \"10px\"}}>Login with google</span></Button>\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"mt-3\">\r\n                      <p className=\"mb-0  text-center\">\r\n                        <a lassName=\"text-primary fw-bold\">\r\n                          <Link to=\"/\">{t(\"Đến trang chủ\")}</Link>\r\n                        </a>\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Card.Body>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;"],"names":["setToken","useContext","MyContext","useState","username","setUsername","password","setPassword","t","useTranslation","nav","useNavigate","login","e","preventDefault","accountLogin","httpLogin","then","res","json","data","console","log","object","userToken","jwtToken","account","id","role","email","window","alert","status","message","src","backgroundLogin","style","width","height","objectFit","filter","position","top","left","Container","Row","className","Col","md","lg","xs","border","background","borderRadius","Card","Form","onSubmit","controlId","onChange","target","value","type","placeholder","marginTop","href","Button","variant","to","onClick","location","replace","backgroundColor","borderColor","size","color","marginLeft","lassName"],"sourceRoot":""}